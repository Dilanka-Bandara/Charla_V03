{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useCallback } from 'react';\nimport websocketService from '../services/websocket';\nimport { useAuth } from '../contexts/AuthContext';\nexport const useWebSocket = () => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  useEffect(() => {\n    // Only connect if we have a user (and implicitly a token)\n    if (user) {\n      websocketService.connect().catch(error => {\n        console.error('WebSocket connection failed:', error);\n      });\n    }\n    return () => {\n      // Optional: disconnect on unmount if desired\n      // websocketService.disconnect();\n    };\n  }, [user]);\n  const subscribeToEvent = useCallback((eventType, callback) => {\n    return websocketService.on(eventType, callback);\n  }, []);\n  const sendMessage = useCallback(message => {\n    websocketService.sendMessage(message);\n  }, []);\n  const joinRoom = useCallback(roomId => {\n    websocketService.joinRoom(roomId);\n  }, []);\n  const sendTyping = useCallback((roomId, isTyping) => {\n    websocketService.sendTyping(roomId, isTyping);\n  }, []);\n  return {\n    subscribeToEvent,\n    sendMessage,\n    joinRoom,\n    sendTyping,\n    isConnected: websocketService.isConnected()\n  };\n};\n_s(useWebSocket, \"VLFYy5HN6DCETg97IVAn/27H1i8=\", false, function () {\n  return [useAuth];\n});","map":{"version":3,"names":["useEffect","useCallback","websocketService","useAuth","useWebSocket","_s","user","connect","catch","error","console","subscribeToEvent","eventType","callback","on","sendMessage","message","joinRoom","roomId","sendTyping","isTyping","isConnected"],"sources":["E:/Charla_V03/frontend/src/hooks/useWebSocket.js"],"sourcesContent":["import { useEffect, useCallback } from 'react';\r\nimport websocketService from '../services/websocket';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nexport const useWebSocket = () => {\r\n  const { user } = useAuth();\r\n\r\n  useEffect(() => {\r\n    // Only connect if we have a user (and implicitly a token)\r\n    if (user) {\r\n      websocketService.connect().catch(error => {\r\n        console.error('WebSocket connection failed:', error);\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      // Optional: disconnect on unmount if desired\r\n      // websocketService.disconnect();\r\n    };\r\n  }, [user]);\r\n\r\n  const subscribeToEvent = useCallback((eventType, callback) => {\r\n    return websocketService.on(eventType, callback);\r\n  }, []);\r\n\r\n  const sendMessage = useCallback((message) => {\r\n    websocketService.sendMessage(message);\r\n  }, []);\r\n\r\n  const joinRoom = useCallback((roomId) => {\r\n    websocketService.joinRoom(roomId);\r\n  }, []);\r\n\r\n  const sendTyping = useCallback((roomId, isTyping) => {\r\n    websocketService.sendTyping(roomId, isTyping);\r\n  }, []);\r\n\r\n  return {\r\n    subscribeToEvent,\r\n    sendMessage,\r\n    joinRoom,\r\n    sendTyping,\r\n    isConnected: websocketService.isConnected()\r\n  };\r\n};"],"mappings":";AAAA,SAASA,SAAS,EAAEC,WAAW,QAAQ,OAAO;AAC9C,OAAOC,gBAAgB,MAAM,uBAAuB;AACpD,SAASC,OAAO,QAAQ,yBAAyB;AAEjD,OAAO,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAChC,MAAM;IAAEC;EAAK,CAAC,GAAGH,OAAO,CAAC,CAAC;EAE1BH,SAAS,CAAC,MAAM;IACd;IACA,IAAIM,IAAI,EAAE;MACRJ,gBAAgB,CAACK,OAAO,CAAC,CAAC,CAACC,KAAK,CAACC,KAAK,IAAI;QACxCC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACtD,CAAC,CAAC;IACJ;IAEA,OAAO,MAAM;MACX;MACA;IAAA,CACD;EACH,CAAC,EAAE,CAACH,IAAI,CAAC,CAAC;EAEV,MAAMK,gBAAgB,GAAGV,WAAW,CAAC,CAACW,SAAS,EAAEC,QAAQ,KAAK;IAC5D,OAAOX,gBAAgB,CAACY,EAAE,CAACF,SAAS,EAAEC,QAAQ,CAAC;EACjD,CAAC,EAAE,EAAE,CAAC;EAEN,MAAME,WAAW,GAAGd,WAAW,CAAEe,OAAO,IAAK;IAC3Cd,gBAAgB,CAACa,WAAW,CAACC,OAAO,CAAC;EACvC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,QAAQ,GAAGhB,WAAW,CAAEiB,MAAM,IAAK;IACvChB,gBAAgB,CAACe,QAAQ,CAACC,MAAM,CAAC;EACnC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,UAAU,GAAGlB,WAAW,CAAC,CAACiB,MAAM,EAAEE,QAAQ,KAAK;IACnDlB,gBAAgB,CAACiB,UAAU,CAACD,MAAM,EAAEE,QAAQ,CAAC;EAC/C,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IACLT,gBAAgB;IAChBI,WAAW;IACXE,QAAQ;IACRE,UAAU;IACVE,WAAW,EAAEnB,gBAAgB,CAACmB,WAAW,CAAC;EAC5C,CAAC;AACH,CAAC;AAAChB,EAAA,CAxCWD,YAAY;EAAA,QACND,OAAO;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}