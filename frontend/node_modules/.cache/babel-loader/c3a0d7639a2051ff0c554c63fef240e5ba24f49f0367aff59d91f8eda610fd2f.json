{"ast":null,"code":"import axios from 'axios';\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\nconst api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Request interceptor\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Response interceptor\napi.interceptors.response.use(response => response, error => {\n  var _error$response;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n    localStorage.removeItem('token');\n    window.location.href = '/';\n  }\n  return Promise.reject(error);\n});\n\n// Auth\nexport const login = (username, password) => api.post('/api/auth/login', new URLSearchParams({\n  username,\n  password\n}));\nexport const register = (username, email, password, fullName) => api.post('/api/auth/register', {\n  username,\n  email,\n  password,\n  full_name: fullName\n});\n\n// Users\nexport const getCurrentUser = () => api.get('/api/users/me');\nexport const getAllUsers = () => api.get('/api/users');\n\n// Rooms\nexport const getRooms = () => api.get('/api/rooms');\nexport const getRoom = roomId => api.get(`/api/rooms/${roomId}`);\nexport const createRoom = roomData => api.post('/api/rooms', roomData);\nexport const joinRoom = roomId => api.post(`/api/rooms/${roomId}/join`);\n\n// NEW: Room Invites\nexport const inviteToRoom = (roomId, userId) => api.post(`/api/rooms/${roomId}/invite`, {\n  user_id: userId\n});\nexport const getMyInvites = () => api.get('/api/rooms/invites');\nexport const acceptInvite = inviteId => api.post(`/api/rooms/invites/${inviteId}/accept`);\nexport const declineInvite = inviteId => api.post(`/api/rooms/invites/${inviteId}/decline`);\n\n// Messages\nexport const getRoomMessages = roomId => api.get(`/api/rooms/${roomId}/messages`);\nexport const createMessage = messageData => api.post('/api/messages', messageData);\nexport const deleteMessage = messageId => api.delete(`/api/messages/${messageId}`);\n\n// NEW: File Upload\nexport const uploadFile = async (file, roomId) => {\n  const formData = new FormData();\n  formData.append('file', file);\n  formData.append('room_id', roomId);\n  return api.post('/api/messages/upload', formData, {\n    headers: {\n      'Content-Type': 'multipart/form-data'\n    }\n  });\n};\n\n// Reactions\nexport const addReaction = (messageId, emoji) => api.post(`/api/messages/${messageId}/reactions`, {\n  emoji\n});\nexport default api;","map":{"version":3,"names":["axios","API_URL","process","env","REACT_APP_API_URL","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","error","Promise","reject","response","_error$response","status","removeItem","window","location","href","login","username","password","post","URLSearchParams","register","email","fullName","full_name","getCurrentUser","get","getAllUsers","getRooms","getRoom","roomId","createRoom","roomData","joinRoom","inviteToRoom","userId","user_id","getMyInvites","acceptInvite","inviteId","declineInvite","getRoomMessages","createMessage","messageData","deleteMessage","messageId","delete","uploadFile","file","formData","FormData","append","addReaction","emoji"],"sources":["E:/Charla_V03/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\r\n\r\nconst api = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Request interceptor\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response?.status === 401) {\r\n      localStorage.removeItem('token');\r\n      window.location.href = '/';\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Auth\r\nexport const login = (username, password) =>\r\n  api.post('/api/auth/login', new URLSearchParams({ username, password }));\r\n\r\nexport const register = (username, email, password, fullName) =>\r\n  api.post('/api/auth/register', { username, email, password, full_name: fullName });\r\n\r\n// Users\r\nexport const getCurrentUser = () => api.get('/api/users/me');\r\nexport const getAllUsers = () => api.get('/api/users');\r\n\r\n// Rooms\r\nexport const getRooms = () => api.get('/api/rooms');\r\nexport const getRoom = (roomId) => api.get(`/api/rooms/${roomId}`);\r\nexport const createRoom = (roomData) => api.post('/api/rooms', roomData);\r\nexport const joinRoom = (roomId) => api.post(`/api/rooms/${roomId}/join`);\r\n\r\n// NEW: Room Invites\r\nexport const inviteToRoom = (roomId, userId) => \r\n  api.post(`/api/rooms/${roomId}/invite`, { user_id: userId });\r\n\r\nexport const getMyInvites = () => api.get('/api/rooms/invites');\r\n\r\nexport const acceptInvite = (inviteId) => \r\n  api.post(`/api/rooms/invites/${inviteId}/accept`);\r\n\r\nexport const declineInvite = (inviteId) => \r\n  api.post(`/api/rooms/invites/${inviteId}/decline`);\r\n\r\n// Messages\r\nexport const getRoomMessages = (roomId) =>\r\n  api.get(`/api/rooms/${roomId}/messages`);\r\n\r\nexport const createMessage = (messageData) =>\r\n  api.post('/api/messages', messageData);\r\n\r\nexport const deleteMessage = (messageId) =>\r\n  api.delete(`/api/messages/${messageId}`);\r\n\r\n// NEW: File Upload\r\nexport const uploadFile = async (file, roomId) => {\r\n  const formData = new FormData();\r\n  formData.append('file', file);\r\n  formData.append('room_id', roomId);\r\n  \r\n  return api.post('/api/messages/upload', formData, {\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data',\r\n    },\r\n  });\r\n};\r\n\r\n// Reactions\r\nexport const addReaction = (messageId, emoji) =>\r\n  api.post(`/api/messages/${messageId}/reactions`, { emoji });\r\n\r\nexport default api;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}