{"ast":null,"code":"var _jsxFileName = \"E:\\\\Charla_V03\\\\frontend\\\\src\\\\components\\\\Chat\\\\ChatWindow.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { motion } from 'framer-motion';\nimport { FiMenu, FiUsers, FiMoreVertical } from 'react-icons/fi';\nimport { getRoomMessages, joinRoom as joinRoomApi } from '../../services/api'; // Renamed to avoid confusion\nimport { useWebSocket } from '../../hooks/useWebSocket';\nimport MessageList from './MessageList';\nimport MessageInput from './MessageInput';\nimport TypingIndicator from './TypingIndicator';\nimport './ChatWindow.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ChatWindow = ({\n  room,\n  onToggleSidebar\n}) => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(false); // Changed default to false\n  const [typingUsers, setTypingUsers] = useState([]);\n  const messagesEndRef = useRef(null);\n\n  // Destructure isConnected to trigger re-joins\n  const {\n    subscribeToEvent,\n    joinRoom: wsJoinRoom,\n    isConnected\n  } = useWebSocket();\n  const loadMessages = useCallback(async () => {\n    if (!(room !== null && room !== void 0 && room.id)) return;\n    setLoading(true);\n    try {\n      const response = await getRoomMessages(room.id);\n      setMessages(response.data);\n    } catch (error) {\n      console.error('Failed to load messages:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [room === null || room === void 0 ? void 0 : room.id]);\n\n  // 1. Handle Room Changes & Initial Load\n  useEffect(() => {\n    if (room !== null && room !== void 0 && room.id) {\n      loadMessages();\n      // Call API to ensure user is member in DB\n      joinRoomApi(room.id).catch(console.error);\n    }\n  }, [room === null || room === void 0 ? void 0 : room.id, loadMessages]);\n\n  // 2. Handle WebSocket Room Joining (Runs on room change AND reconnection)\n  useEffect(() => {\n    if (room !== null && room !== void 0 && room.id && isConnected) {\n      console.log(`Joining WS room: ${room.id}`);\n      wsJoinRoom(room.id);\n    }\n  }, [room === null || room === void 0 ? void 0 : room.id, isConnected, wsJoinRoom]);\n\n  // 3. Handle Incoming WebSocket Events\n  const handleNewMessage = useCallback(data => {\n    // Strict check: Only add if message belongs to THIS room\n    if (data.message && data.room_id === (room === null || room === void 0 ? void 0 : room.id)) {\n      setMessages(prev => {\n        const exists = prev.some(msg => msg.id === data.message.id);\n        if (exists) return prev;\n        return [...prev, data.message];\n      });\n      // Scroll to bottom on new message\n      setTimeout(scrollToBottom, 100);\n    }\n  }, [room === null || room === void 0 ? void 0 : room.id]);\n  const handleTyping = useCallback(data => {\n    if (data.room_id === (room === null || room === void 0 ? void 0 : room.id)) {\n      setTypingUsers(data.users || []);\n    }\n  }, [room === null || room === void 0 ? void 0 : room.id]);\n  const handleReaction = useCallback(data => {\n    if (data.message_id && data.room_id === (room === null || room === void 0 ? void 0 : room.id)) {\n      setMessages(prev => prev.map(msg => msg.id === data.message_id ? {\n        ...msg,\n        reactions: data.reaction ? [...(msg.reactions || []), data.reaction] : msg.reactions\n      } : msg));\n    }\n  }, [room === null || room === void 0 ? void 0 : room.id]);\n  const handleMessageDeleted = useCallback(data => {\n    if (data.message_id && data.room_id === (room === null || room === void 0 ? void 0 : room.id)) {\n      setMessages(prev => prev.filter(msg => msg.id !== data.message_id));\n    }\n  }, [room === null || room === void 0 ? void 0 : room.id]);\n  useEffect(() => {\n    const unsubscribeMessage = subscribeToEvent('new_message', handleNewMessage);\n    const unsubscribeTyping = subscribeToEvent('typing', handleTyping);\n    const unsubscribeReaction = subscribeToEvent('message_reaction', handleReaction);\n    const unsubscribeDeleted = subscribeToEvent('message_deleted', handleMessageDeleted);\n    return () => {\n      unsubscribeMessage();\n      unsubscribeTyping();\n      unsubscribeReaction();\n      unsubscribeDeleted();\n    };\n  }, [subscribeToEvent, handleNewMessage, handleTyping, handleReaction, handleMessageDeleted]);\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  if (!room) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-empty\",\n      children: /*#__PURE__*/_jsxDEV(motion.div, {\n        className: \"empty-state\",\n        initial: {\n          opacity: 0,\n          scale: 0.9\n        },\n        animate: {\n          opacity: 1,\n          scale: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-icon\",\n          children: \"\\uD83D\\uDCAC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Welcome to ChatFlow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Select a room to start chatting\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-window\",\n    children: [/*#__PURE__*/_jsxDEV(motion.div, {\n      className: \"chat-header glass-card\",\n      initial: {\n        y: -20,\n        opacity: 0\n      },\n      animate: {\n        y: 0,\n        opacity: 1\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"mobile-menu-btn\",\n        onClick: onToggleSidebar,\n        children: /*#__PURE__*/_jsxDEV(FiMenu, {\n          size: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-room-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"room-icon-large\",\n          children: room.icon\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: room.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"room-meta\",\n            children: [/*#__PURE__*/_jsxDEV(FiUsers, {\n              size: 14\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this), room.member_count, \" members\", room.room_type === 'private' && ' â€¢ Private']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"icon-btn\",\n        children: /*#__PURE__*/_jsxDEV(FiMoreVertical, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages-container\",\n      children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-messages\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Loading messages...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(MessageList, {\n          messages: messages\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }, this), typingUsers.length > 0 && /*#__PURE__*/_jsxDEV(TypingIndicator, {\n      users: typingUsers\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(MessageInput, {\n      roomId: room.id\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatWindow, \"Mdj7+6HShvKt0F8TGyJRqb3k/Vo=\", false, function () {\n  return [useWebSocket];\n});\n_c = ChatWindow;\nexport default ChatWindow;\nvar _c;\n$RefreshReg$(_c, \"ChatWindow\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","motion","FiMenu","FiUsers","FiMoreVertical","getRoomMessages","joinRoom","joinRoomApi","useWebSocket","MessageList","MessageInput","TypingIndicator","jsxDEV","_jsxDEV","Fragment","_Fragment","ChatWindow","room","onToggleSidebar","_s","messages","setMessages","loading","setLoading","typingUsers","setTypingUsers","messagesEndRef","subscribeToEvent","wsJoinRoom","isConnected","loadMessages","id","response","data","error","console","catch","log","handleNewMessage","message","room_id","prev","exists","some","msg","setTimeout","scrollToBottom","handleTyping","users","handleReaction","message_id","map","reactions","reaction","handleMessageDeleted","filter","unsubscribeMessage","unsubscribeTyping","unsubscribeReaction","unsubscribeDeleted","_messagesEndRef$curre","current","scrollIntoView","behavior","className","children","div","initial","opacity","scale","animate","fileName","_jsxFileName","lineNumber","columnNumber","y","onClick","size","icon","name","member_count","room_type","ref","length","roomId","_c","$RefreshReg$"],"sources":["E:/Charla_V03/frontend/src/components/Chat/ChatWindow.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { FiMenu, FiUsers, FiMoreVertical } from 'react-icons/fi';\r\nimport { getRoomMessages, joinRoom as joinRoomApi } from '../../services/api'; // Renamed to avoid confusion\r\nimport { useWebSocket } from '../../hooks/useWebSocket';\r\nimport MessageList from './MessageList';\r\nimport MessageInput from './MessageInput';\r\nimport TypingIndicator from './TypingIndicator';\r\nimport './ChatWindow.css';\r\n\r\nconst ChatWindow = ({ room, onToggleSidebar }) => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [loading, setLoading] = useState(false); // Changed default to false\r\n  const [typingUsers, setTypingUsers] = useState([]);\r\n  const messagesEndRef = useRef(null);\r\n  \r\n  // Destructure isConnected to trigger re-joins\r\n  const { subscribeToEvent, joinRoom: wsJoinRoom, isConnected } = useWebSocket();\r\n\r\n  const loadMessages = useCallback(async () => {\r\n    if (!room?.id) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      const response = await getRoomMessages(room.id);\r\n      setMessages(response.data);\r\n    } catch (error) {\r\n      console.error('Failed to load messages:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [room?.id]);\r\n\r\n  // 1. Handle Room Changes & Initial Load\r\n  useEffect(() => {\r\n    if (room?.id) {\r\n      loadMessages();\r\n      // Call API to ensure user is member in DB\r\n      joinRoomApi(room.id).catch(console.error);\r\n    }\r\n  }, [room?.id, loadMessages]);\r\n\r\n  // 2. Handle WebSocket Room Joining (Runs on room change AND reconnection)\r\n  useEffect(() => {\r\n    if (room?.id && isConnected) {\r\n      console.log(`Joining WS room: ${room.id}`);\r\n      wsJoinRoom(room.id);\r\n    }\r\n  }, [room?.id, isConnected, wsJoinRoom]);\r\n\r\n  // 3. Handle Incoming WebSocket Events\r\n  const handleNewMessage = useCallback((data) => {\r\n    // Strict check: Only add if message belongs to THIS room\r\n    if (data.message && data.room_id === room?.id) {\r\n      setMessages(prev => {\r\n        const exists = prev.some(msg => msg.id === data.message.id);\r\n        if (exists) return prev;\r\n        return [...prev, data.message];\r\n      });\r\n      // Scroll to bottom on new message\r\n      setTimeout(scrollToBottom, 100); \r\n    }\r\n  }, [room?.id]);\r\n\r\n  const handleTyping = useCallback((data) => {\r\n    if (data.room_id === room?.id) {\r\n      setTypingUsers(data.users || []);\r\n    }\r\n  }, [room?.id]);\r\n\r\n  const handleReaction = useCallback((data) => {\r\n    if (data.message_id && data.room_id === room?.id) {\r\n      setMessages(prev =>\r\n        prev.map(msg =>\r\n          msg.id === data.message_id\r\n            ? { ...msg, reactions: data.reaction ? [...(msg.reactions || []), data.reaction] : msg.reactions }\r\n            : msg\r\n        )\r\n      );\r\n    }\r\n  }, [room?.id]);\r\n\r\n  const handleMessageDeleted = useCallback((data) => {\r\n    if (data.message_id && data.room_id === room?.id) {\r\n      setMessages(prev => prev.filter(msg => msg.id !== data.message_id));\r\n    }\r\n  }, [room?.id]);\r\n\r\n  useEffect(() => {\r\n    const unsubscribeMessage = subscribeToEvent('new_message', handleNewMessage);\r\n    const unsubscribeTyping = subscribeToEvent('typing', handleTyping);\r\n    const unsubscribeReaction = subscribeToEvent('message_reaction', handleReaction);\r\n    const unsubscribeDeleted = subscribeToEvent('message_deleted', handleMessageDeleted);\r\n\r\n    return () => {\r\n      unsubscribeMessage();\r\n      unsubscribeTyping();\r\n      unsubscribeReaction();\r\n      unsubscribeDeleted();\r\n    };\r\n  }, [subscribeToEvent, handleNewMessage, handleTyping, handleReaction, handleMessageDeleted]);\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  if (!room) {\r\n    return (\r\n      <div className=\"chat-empty\">\r\n        <motion.div\r\n          className=\"empty-state\"\r\n          initial={{ opacity: 0, scale: 0.9 }}\r\n          animate={{ opacity: 1, scale: 1 }}\r\n        >\r\n          <div className=\"empty-icon\">ðŸ’¬</div>\r\n          <h2>Welcome to ChatFlow</h2>\r\n          <p>Select a room to start chatting</p>\r\n        </motion.div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"chat-window\">\r\n      <motion.div\r\n        className=\"chat-header glass-card\"\r\n        initial={{ y: -20, opacity: 0 }}\r\n        animate={{ y: 0, opacity: 1 }}\r\n      >\r\n        <button className=\"mobile-menu-btn\" onClick={onToggleSidebar}>\r\n          <FiMenu size={24} />\r\n        </button>\r\n        \r\n        <div className=\"chat-room-info\">\r\n          <div className=\"room-icon-large\">{room.icon}</div>\r\n          <div>\r\n            <h2>{room.name}</h2>\r\n            <p className=\"room-meta\">\r\n              <FiUsers size={14} />\r\n              {room.member_count} members\r\n              {room.room_type === 'private' && ' â€¢ Private'}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        <button className=\"icon-btn\">\r\n          <FiMoreVertical size={20} />\r\n        </button>\r\n      </motion.div>\r\n\r\n      <div className=\"messages-container\">\r\n        {loading ? (\r\n          <div className=\"loading-messages\">\r\n            <div className=\"spinner\"></div>\r\n            <p>Loading messages...</p>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <MessageList messages={messages} />\r\n            <div ref={messagesEndRef} />\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {typingUsers.length > 0 && (\r\n        <TypingIndicator users={typingUsers} />\r\n      )}\r\n\r\n      <MessageInput roomId={room.id} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatWindow;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}