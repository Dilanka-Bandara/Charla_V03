{"ast":null,"code":"import{useEffect,useCallback}from'react';import websocketService from'../services/websocket';import{useAuth}from'../contexts/AuthContext';export const useWebSocket=onMessage=>{const{user}=useAuth();useEffect(()=>{if(user!==null&&user!==void 0&&user.id){websocketService.connect(user.id);return()=>{websocketService.disconnect();};}},[user]);const subscribeToEvent=useCallback((event,callback)=>{websocketService.on(event,callback);return()=>websocketService.off(event,callback);},[]);const sendMessage=useCallback((roomId,message)=>{websocketService.sendMessage(roomId,message);},[]);const sendTyping=useCallback((roomId,isTyping)=>{websocketService.sendTyping(roomId,isTyping);},[]);const sendReaction=useCallback((roomId,messageId,reaction)=>{websocketService.sendReaction(roomId,messageId,reaction);},[]);const joinRoom=useCallback(roomId=>{websocketService.joinRoom(roomId);},[]);const leaveRoom=useCallback(roomId=>{websocketService.leaveRoom(roomId);},[]);return{subscribeToEvent,sendMessage,sendTyping,sendReaction,joinRoom,leaveRoom};};","map":{"version":3,"names":["useEffect","useCallback","websocketService","useAuth","useWebSocket","onMessage","user","id","connect","disconnect","subscribeToEvent","event","callback","on","off","sendMessage","roomId","message","sendTyping","isTyping","sendReaction","messageId","reaction","joinRoom","leaveRoom"],"sources":["E:/Charla_V03/frontend/src/hooks/useWebSocket.js"],"sourcesContent":["import { useEffect, useCallback } from 'react';\r\nimport websocketService from '../services/websocket';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nexport const useWebSocket = (onMessage) => {\r\n  const { user } = useAuth();\r\n\r\n  useEffect(() => {\r\n    if (user?.id) {\r\n      websocketService.connect(user.id);\r\n\r\n      return () => {\r\n        websocketService.disconnect();\r\n      };\r\n    }\r\n  }, [user]);\r\n\r\n  const subscribeToEvent = useCallback((event, callback) => {\r\n    websocketService.on(event, callback);\r\n    return () => websocketService.off(event, callback);\r\n  }, []);\r\n\r\n  const sendMessage = useCallback((roomId, message) => {\r\n    websocketService.sendMessage(roomId, message);\r\n  }, []);\r\n\r\n  const sendTyping = useCallback((roomId, isTyping) => {\r\n    websocketService.sendTyping(roomId, isTyping);\r\n  }, []);\r\n\r\n  const sendReaction = useCallback((roomId, messageId, reaction) => {\r\n    websocketService.sendReaction(roomId, messageId, reaction);\r\n  }, []);\r\n\r\n  const joinRoom = useCallback((roomId) => {\r\n    websocketService.joinRoom(roomId);\r\n  }, []);\r\n\r\n  const leaveRoom = useCallback((roomId) => {\r\n    websocketService.leaveRoom(roomId);\r\n  }, []);\r\n\r\n  return {\r\n    subscribeToEvent,\r\n    sendMessage,\r\n    sendTyping,\r\n    sendReaction,\r\n    joinRoom,\r\n    leaveRoom\r\n  };\r\n};\r\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC9C,MAAO,CAAAC,gBAAgB,KAAM,uBAAuB,CACpD,OAASC,OAAO,KAAQ,yBAAyB,CAEjD,MAAO,MAAM,CAAAC,YAAY,CAAIC,SAAS,EAAK,CACzC,KAAM,CAAEC,IAAK,CAAC,CAAGH,OAAO,CAAC,CAAC,CAE1BH,SAAS,CAAC,IAAM,CACd,GAAIM,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEC,EAAE,CAAE,CACZL,gBAAgB,CAACM,OAAO,CAACF,IAAI,CAACC,EAAE,CAAC,CAEjC,MAAO,IAAM,CACXL,gBAAgB,CAACO,UAAU,CAAC,CAAC,CAC/B,CAAC,CACH,CACF,CAAC,CAAE,CAACH,IAAI,CAAC,CAAC,CAEV,KAAM,CAAAI,gBAAgB,CAAGT,WAAW,CAAC,CAACU,KAAK,CAAEC,QAAQ,GAAK,CACxDV,gBAAgB,CAACW,EAAE,CAACF,KAAK,CAAEC,QAAQ,CAAC,CACpC,MAAO,IAAMV,gBAAgB,CAACY,GAAG,CAACH,KAAK,CAAEC,QAAQ,CAAC,CACpD,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAG,WAAW,CAAGd,WAAW,CAAC,CAACe,MAAM,CAAEC,OAAO,GAAK,CACnDf,gBAAgB,CAACa,WAAW,CAACC,MAAM,CAAEC,OAAO,CAAC,CAC/C,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,UAAU,CAAGjB,WAAW,CAAC,CAACe,MAAM,CAAEG,QAAQ,GAAK,CACnDjB,gBAAgB,CAACgB,UAAU,CAACF,MAAM,CAAEG,QAAQ,CAAC,CAC/C,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,YAAY,CAAGnB,WAAW,CAAC,CAACe,MAAM,CAAEK,SAAS,CAAEC,QAAQ,GAAK,CAChEpB,gBAAgB,CAACkB,YAAY,CAACJ,MAAM,CAAEK,SAAS,CAAEC,QAAQ,CAAC,CAC5D,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,QAAQ,CAAGtB,WAAW,CAAEe,MAAM,EAAK,CACvCd,gBAAgB,CAACqB,QAAQ,CAACP,MAAM,CAAC,CACnC,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAQ,SAAS,CAAGvB,WAAW,CAAEe,MAAM,EAAK,CACxCd,gBAAgB,CAACsB,SAAS,CAACR,MAAM,CAAC,CACpC,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,CACLN,gBAAgB,CAChBK,WAAW,CACXG,UAAU,CACVE,YAAY,CACZG,QAAQ,CACRC,SACF,CAAC,CACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}