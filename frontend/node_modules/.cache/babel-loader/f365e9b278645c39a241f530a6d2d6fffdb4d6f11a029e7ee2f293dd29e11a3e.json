{"ast":null,"code":"var _jsxFileName = \"E:\\\\Charla_V03\\\\frontend\\\\src\\\\components\\\\Chat\\\\MessageInput.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { FiSend, FiSmile, FiPaperclip } from 'react-icons/fi';\nimport EmojiPicker from 'emoji-picker-react';\nimport { createMessage } from '../../services/api';\nimport { useWebSocket } from '../../hooks/useWebSocket';\nimport toast from 'react-hot-toast';\nimport './MessageInput.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MessageInput = ({\n  roomId\n}) => {\n  _s();\n  const [message, setMessage] = useState('');\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\n  const [isTyping, setIsTyping] = useState(false);\n  const inputRef = useRef(null);\n  const typingTimeoutRef = useRef(null);\n  const {\n    sendTyping\n  } = useWebSocket();\n  useEffect(() => {\n    return () => {\n      if (typingTimeoutRef.current) {\n        clearTimeout(typingTimeoutRef.current);\n      }\n    };\n  }, []);\n  const handleInputChange = e => {\n    const value = e.target.value;\n    setMessage(value);\n\n    // Handle typing indicator\n    if (value && !isTyping) {\n      setIsTyping(true);\n      sendTyping(roomId, true);\n    }\n\n    // Clear previous timeout\n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current);\n    }\n\n    // Set new timeout\n    typingTimeoutRef.current = setTimeout(() => {\n      setIsTyping(false);\n      sendTyping(roomId, false);\n    }, 1000);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!message.trim()) return;\n    try {\n      var _inputRef$current;\n      const newMessage = await createMessage({\n        content: message.trim(),\n        room_id: roomId,\n        message_type: 'text'\n      });\n\n      // Clear typing indicator\n      setIsTyping(false);\n      sendTyping(roomId, false);\n      setMessage('');\n      setShowEmojiPicker(false);\n      (_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : _inputRef$current.focus();\n    } catch (error) {\n      toast.error('Failed to send message');\n      console.error('Failed to send message:', error);\n    }\n  };\n  const handleEmojiClick = emojiData => {\n    var _inputRef$current2;\n    setMessage(prev => prev + emojiData.emoji);\n    (_inputRef$current2 = inputRef.current) === null || _inputRef$current2 === void 0 ? void 0 : _inputRef$current2.focus();\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit(e);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"message-input-container\",\n    children: [showEmojiPicker && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"emoji-picker-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(EmojiPicker, {\n        onEmojiClick: handleEmojiClick,\n        theme: \"dark\",\n        width: \"100%\",\n        height: \"350px\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"message-input glass-card\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"input-action-btn\",\n        onClick: () => setShowEmojiPicker(!showEmojiPicker),\n        children: /*#__PURE__*/_jsxDEV(FiSmile, {\n          size: 22\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        ref: inputRef,\n        value: message,\n        onChange: handleInputChange,\n        onKeyPress: handleKeyPress,\n        placeholder: \"Type a message...\",\n        rows: \"1\",\n        className: \"message-textarea\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"input-action-btn\",\n        title: \"Attach file (Coming soon)\",\n        children: /*#__PURE__*/_jsxDEV(FiPaperclip, {\n          size: 22\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(motion.button, {\n        type: \"submit\",\n        className: \"send-btn\",\n        disabled: !message.trim(),\n        whileHover: {\n          scale: message.trim() ? 1.05 : 1\n        },\n        whileTap: {\n          scale: message.trim() ? 0.95 : 1\n        },\n        children: /*#__PURE__*/_jsxDEV(FiSend, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n_s(MessageInput, \"Te8rCPmA9h2GbRDcMxCkoBK7Itk=\", false, function () {\n  return [useWebSocket];\n});\n_c = MessageInput;\nexport default MessageInput;\nvar _c;\n$RefreshReg$(_c, \"MessageInput\");","map":{"version":3,"names":["React","useState","useRef","useEffect","motion","FiSend","FiSmile","FiPaperclip","EmojiPicker","createMessage","useWebSocket","toast","jsxDEV","_jsxDEV","MessageInput","roomId","_s","message","setMessage","showEmojiPicker","setShowEmojiPicker","isTyping","setIsTyping","inputRef","typingTimeoutRef","sendTyping","current","clearTimeout","handleInputChange","e","value","target","setTimeout","handleSubmit","preventDefault","trim","_inputRef$current","newMessage","content","room_id","message_type","focus","error","console","handleEmojiClick","emojiData","_inputRef$current2","prev","emoji","handleKeyPress","key","shiftKey","className","children","onEmojiClick","theme","width","height","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","onClick","size","ref","onChange","onKeyPress","placeholder","rows","title","button","disabled","whileHover","scale","whileTap","_c","$RefreshReg$"],"sources":["E:/Charla_V03/frontend/src/components/Chat/MessageInput.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { FiSend, FiSmile, FiPaperclip } from 'react-icons/fi';\r\nimport EmojiPicker from 'emoji-picker-react';\r\nimport { createMessage } from '../../services/api';\r\nimport { useWebSocket } from '../../hooks/useWebSocket';\r\nimport toast from 'react-hot-toast';\r\nimport './MessageInput.css';\r\n\r\nconst MessageInput = ({ roomId }) => {\r\n  const [message, setMessage] = useState('');\r\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const inputRef = useRef(null);\r\n  const typingTimeoutRef = useRef(null);\r\n  const { sendTyping } = useWebSocket();\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (typingTimeoutRef.current) {\r\n        clearTimeout(typingTimeoutRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const handleInputChange = (e) => {\r\n    const value = e.target.value;\r\n    setMessage(value);\r\n\r\n    // Handle typing indicator\r\n    if (value && !isTyping) {\r\n      setIsTyping(true);\r\n      sendTyping(roomId, true);\r\n    }\r\n\r\n    // Clear previous timeout\r\n    if (typingTimeoutRef.current) {\r\n      clearTimeout(typingTimeoutRef.current);\r\n    }\r\n\r\n    // Set new timeout\r\n    typingTimeoutRef.current = setTimeout(() => {\r\n      setIsTyping(false);\r\n      sendTyping(roomId, false);\r\n    }, 1000);\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!message.trim()) return;\r\n\r\n    try {\r\n      const newMessage = await createMessage({\r\n        content: message.trim(),\r\n        room_id: roomId,\r\n        message_type: 'text'\r\n      });\r\n\r\n      // Clear typing indicator\r\n      setIsTyping(false);\r\n      sendTyping(roomId, false);\r\n      \r\n      setMessage('');\r\n      setShowEmojiPicker(false);\r\n      inputRef.current?.focus();\r\n    } catch (error) {\r\n      toast.error('Failed to send message');\r\n      console.error('Failed to send message:', error);\r\n    }\r\n  };\r\n\r\n  const handleEmojiClick = (emojiData) => {\r\n    setMessage(prev => prev + emojiData.emoji);\r\n    inputRef.current?.focus();\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSubmit(e);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"message-input-container\">\r\n      {showEmojiPicker && (\r\n        <div className=\"emoji-picker-wrapper\">\r\n          <EmojiPicker\r\n            onEmojiClick={handleEmojiClick}\r\n            theme=\"dark\"\r\n            width=\"100%\"\r\n            height=\"350px\"\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      <form className=\"message-input glass-card\" onSubmit={handleSubmit}>\r\n        <button\r\n          type=\"button\"\r\n          className=\"input-action-btn\"\r\n          onClick={() => setShowEmojiPicker(!showEmojiPicker)}\r\n        >\r\n          <FiSmile size={22} />\r\n        </button>\r\n\r\n        <textarea\r\n          ref={inputRef}\r\n          value={message}\r\n          onChange={handleInputChange}\r\n          onKeyPress={handleKeyPress}\r\n          placeholder=\"Type a message...\"\r\n          rows=\"1\"\r\n          className=\"message-textarea\"\r\n        />\r\n\r\n        <button\r\n          type=\"button\"\r\n          className=\"input-action-btn\"\r\n          title=\"Attach file (Coming soon)\"\r\n        >\r\n          <FiPaperclip size={22} />\r\n        </button>\r\n\r\n        <motion.button\r\n          type=\"submit\"\r\n          className=\"send-btn\"\r\n          disabled={!message.trim()}\r\n          whileHover={{ scale: message.trim() ? 1.05 : 1 }}\r\n          whileTap={{ scale: message.trim() ? 0.95 : 1 }}\r\n        >\r\n          <FiSend size={20} />\r\n        </motion.button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessageInput;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}